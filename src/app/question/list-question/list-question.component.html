<p-toast></p-toast>
<p-confirmdialog></p-confirmdialog>

<app-sidebar-drawer></app-sidebar-drawer>

<div class="p-4 pl-[270px] pr-4 max-w-screen-xl mx-auto transition-all flex flex-col justify-between">
  <!-- Filtros -->
  <div class="flex items-end gap-4 mb-4 w-full">
    <div class="col-span-1 md:col-span-1">
      <p-dropdown [options]="categories" [(ngModel)]="selectedSubject" optionLabel="name"
        placeholder="Selecione a Disciplina" (onChange)="onFilterChange()"></p-dropdown>
    </div>
    <div class="col-span-1 md:col-span-1">
      <p-dropdown [options]="difficulties" [(ngModel)]="selectedDifficulty" optionLabel="name"
        placeholder="Selecione a Dificuldade" (onChange)="onFilterChange()"></p-dropdown>
    </div>
  </div>

  <!-- Lista de questÃµes -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    @for (question of filteredQuestions; track question.id) {
    <div class="bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 transform hover:shadow-lg">
      <div class="p-4">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold text-gray-900">{{ question.text }}</h3>
          <div class="flex gap-2">
            <button pButton type="button" class="p-button-text p-button-sm text-blue-600"
              (click)="viewQuestion(question.id)" pTooltip="Visualizar" tooltipPosition="top">
              <i class="fa-solid fa-eye"></i>
            </button>
            <button pButton type="button" class="p-button-text p-button-sm text-yellow-600"
              (click)="editQuestion(question.id)" pTooltip="Editar" tooltipPosition="top">
              <i class="fa-solid fa-pen-to-square"></i>
            </button>
            <button pButton type="button" class="p-button-text p-button-sm text-red-600"
              (click)="question.id && deleteQuestion(question.id)" pTooltip="Excluir" tooltipPosition="top">
              <i class="fa-solid fa-trash-can"></i>
            </button>
          </div>
        </div>
        <div class="mt-2 text-sm text-gray-600">
          <div class="flex items-center gap-2">
            <i class="fa-solid fa-book"></i> <span>Disciplina:</span> {{ question.subject?.name }}
          </div>
          <div class="flex items-center gap-2 mt-1">
            <i class="fa-solid fa-signal"></i> <span>Dificuldade:</span> {{ question.difficulty?.name }}
          </div>
        </div>
      </div>
    </div>
    }
  </div>

  <!-- Paginador e colocar no bottom-->
  <div class="card flex justify-center items-center mb-auto mt-16">
    <p-paginator (onPageChange)="onPageChange($event)" [first]="(questions.page - 1) * questions.size"
      [rows]="questions.size" [totalRecords]="questions.total" [rowsPerPageOptions]="[5, 10, 15]" />
  </div>
</div>